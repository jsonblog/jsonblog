{{#> layout}}
  {{#*inline "content"}}
    {{#if posts}}
      <!-- Post Cards (Vertical Stack) -->
      <div class="space-y-6">
        {{#each posts}}
          <article class="lab-card {{#if @first}}lab-card--featured{{/if}}">

            <!-- Metadata -->
            <div class="post-meta flex items-center gap-4">
              {{#if this.createdAt}}
                <time datetime="{{this.createdAt}}">{{formatDate this.createdAt}}</time>
              {{/if}}
              {{#if this.categories}}
                <span class="text-chalk-500">•</span>
                <span>{{this.categories.[0]}}</span>
              {{/if}}
              {{#if (eq this.type 'ai')}}
                <span class="ai-badge">AI</span>
              {{/if}}
            </div>

            <!-- Title -->
            <h2 class="post-title {{#if @first}}post-title--featured{{/if}}">
              <a href="/{{this.slug}}">{{this.title}}</a>
            </h2>

            <!-- Excerpt (featured posts only) -->
            {{#if @first}}
              {{#if this.description}}
                <p class="post-excerpt">{{this.description}}</p>
              {{/if}}
            {{/if}}

            <!-- Tags -->
            {{#if this.tags}}
              <div class="flex flex-wrap gap-2 mt-4">
                {{#each this.tags}}
                  <a href="/tag/{{slugify this}}" class="tag">{{this}}</a>
                {{/each}}
              </div>
            {{/if}}

            <!-- Read More (featured only) -->
            {{#if @first}}
              <a href="/{{this.slug}}" class="post-read-more inline-block mt-4">Read more →</a>
            {{/if}}
          </article>
        {{/each}}
      </div>

      <!-- Pagination -->
      {{#if pagination}}
        {{#if (gt pagination.totalPages 1)}}
          <nav class="pagination">
            {{#if pagination.hasPrev}}
              {{#if pagination.isFirstPage}}
                <a href="/" class="pagination-button">← Previous</a>
              {{else}}
                <a href="/page/{{pagination.prevPage}}" class="pagination-button">← Previous</a>
              {{/if}}
            {{else}}
              <button class="pagination-button" disabled>← Previous</button>
            {{/if}}

            <span class="text-chalk-400 font-mono text-sm">
              Page {{pagination.currentPage}} of {{pagination.totalPages}}
            </span>

            {{#if pagination.hasNext}}
              <a href="/page/{{pagination.nextPage}}" class="pagination-button">Next →</a>
            {{else}}
              <button class="pagination-button" disabled>Next →</button>
            {{/if}}
          </nav>
        {{/if}}
      {{/if}}
    {{else}}
      <div class="text-center py-20">
        <p class="text-chalk-300 text-lg">No posts yet.</p>
      </div>
    {{/if}}
  {{/inline}}
{{/layout}}
